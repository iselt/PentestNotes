import os
import re

def replace_headers_in_md_files(directory):
    # 使用 os.walk 递归遍历所有子目录和文件
    for root, dirs, files in os.walk(directory):
        for filename in files:
            if filename.endswith(".md"):
                filepath = os.path.join(root, filename)
                
                with open(filepath, 'r', encoding='utf-8') as file:
                    content = file.read()

                # 使用正则表达式匹配以 # 开头的行
                new_content = re.sub(r'^# (.+)$', r'+++\ntitle = "\1"\n+++', content, flags=re.MULTILINE)

                # 写回文件
                with open(filepath, 'w', encoding='utf-8') as file:
                    file.write(new_content)

                print(f"Processed {filepath}")

# 替换以下路径为目标目录
target_directory = 'content'
replace_headers_in_md_files(target_directory)
