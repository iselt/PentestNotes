# Linux信息收集

## 查看系统版本

- `cat /etc/issue`
- `cat /etc/*-release`
- `cat /etc/lsb-release`
- `cat /etc/redhat-release`
- `cat /proc/version`
- `uname -a`

## 查看内核版本

- `(cat /proc/version || uname -a ) 2>/dev/null`
- `lsb_release -a 2>/dev/null` old, not by default on many systems
- `cat /etc/os-release 2>/dev/null`  universal on modern systems

## proc 文件系统

<https://blog.csdn.net/cjdgg/article/details/119860355>

## 查看环境变量

- `(env || set) 2>/dev/null`

如果你对位于 PATH 变量中任何文件夹的写入权限，你就有可能劫持某些库或二进制文件

## 查看用户信息

- `id` // 查看当前用户信息
- `who` // 查看当前登录用户
- `w`  // 查看当前登录用户
- `last` // 查看登录历史
- `cat /etc/passwd | cut -d: -f1`// 查看所有用户
- `grep -v -E "^#" /etc/passwd | awk -F: '$3 == 0 { print $1}'`// 查看所有 root 用户
- `awk -F: '($3 == "0") {print}' /etc/passwd` // 0 为 root 用户
- `cat /etc/sudoers` // 查看 sudo 权限

## 查看网络信息

- `ifconfig -a`
- `ip a`
- `cat /etc/network/interfaces`
- `cat /etc/sysconfig/network`
- `cat /etc/resolv.conf`

## 查看有写权限的文件

- `find / -writable -type -f 2>/dev/null`
- `find / -writable -type -f -not -path "/proc/*" -not -path "/sys/*" 2>/dev/null`

## 查看 sudo 权限

- `sudo -l`

## 查看进程信息

- `ps -ef`
- `ps aux`
- `top`
- `cat /etc/services`

## 查看计划任务

- `cat /etc/crontab`

## 查看网络链接

- `netstat -antup`
- `netstat -antpx`
- `ss -antup`

## 查看防火墙

- `iptables -L`
- `ufw status`
- `firewall-cmd --state`
- `cat /etc/sysconfig/iptables`
- `cat /etc/iptables.conf`
- `cat /etc/ufw/ufw.conf`

## 查看系统服务

- `systemctl list-units --type service --all`
- `systemctl list-unit-files`
- `systemctl list-units --type target`

## 查看某一用户组中的用户

- `getent group <groupname>`
- `getent group <gid>`

## 查看某一用户的组

- `groups <username>`

## 查看邮件信息

- `cat /var/mail/<username>`

## 数据库信息

- `mysql -u root -p`

- `psql -U postgres`

- `sqlite3 /path/to/db`

## 系统日志

### 登录日志

- `cat /var/log/wtmp`
- `last`
- `w` （查看当前登录用户）

### 命令历史

- `cat ~/.bash_history`
- `cat ~/.zsh_history`
- `history`
